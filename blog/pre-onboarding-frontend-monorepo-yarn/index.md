---
title: 12ì›” í”„ë¦¬ì˜¨ë³´ë”© í”„ë¡ íŠ¸ì—”ë“œ ì±Œë¦°ì§€ - ëª¨ë…¸ë ˆí¬ ì‹œìŠ¤í…œ
description: 12ì›” í”„ë¦¬ì˜¨ë³´ë”© í”„ë¡ íŠ¸ì—”ë“œ ì±Œë¦°ì§€, ëª¨ë…¸ë ˆí¬ ì‹œìŠ¤í…œ ì¤‘ yarnì— ëŒ€í•´ì„œ ì •ë¦¬í•©ë‹ˆë‹¤.
tags: [í”„ë¦¬ì˜¨ë³´ë”©, ëª¨ë…¸ë ˆí¬, yarn, yarn-berry, 12ì›”í”„ë¦¬ì˜¨ë³´ë”©]
date: '2022-12-12'
---

12ì›” í”„ë¦¬ì˜¨ë³´ë”© í”„ë¡ íŠ¸ì—”ë“œ ì±Œë¦°ì§€ ìˆ˜ê°• ë„ì¤‘ ì• ë§¤í•˜ê²Œ ì•Œê³  ìˆì—ˆê±°ë‚˜ ìƒˆë¡œì´ ì•Œê²Œëœ ì •ë³´ ì •ë¦¬í•©ë‹ˆë‹¤.

<!--truncate-->

## ëª¨ë…¸ë ˆí¬ ë„ì… ì¼€ì´ìŠ¤

### 1. B2C, B2B, adminë¥¼ í•˜ë‚˜ë¡œ

- ë©€í‹°ë ˆí¬ë¥¼ ëª¨ë…¸ë ˆí¬ë¡œ ê°€ì ¸ê°€ë©° ê°™ì€ ì„¤ì •ì„ ë°˜ë³µí•˜ê³  ì‹¶ì§€ ì•Šì„ ë•Œ ë„ì…
- ë‹¨ë‹¨íˆ í•˜ë‚˜ë¡œ ë˜ì–´ìˆëŠ” git ì €ì¥ì†Œë¥¼ ë³¼ ìˆ˜ ìˆë‹¤.

### 2. monolith -> Microserviceë¡œ ì „í™˜

- ê¸°ì¡´ì—ëŠ” í•œ íŒ¨í‚¤ì§€ ì•ˆì— ì—¬ëŸ¬ ê°œì˜ ì„œë¹„ìŠ¤ê°€ ìˆì—ˆìŒ
- ì´ë¥¼ í•œ íŒ¨í‚¤ì§€ì— í•˜ë‚˜ì˜ ì„œë¹„ìŠ¤ë¡œ ê°–ê³  ê°€ê² ë‹¤

ì˜ˆë¥¼ ë“¤ì–´...

- í•œ í˜ì´ì§€ ì•ˆì— menuê°€ ëª‡ ê°œ ì•ˆ ë¼ë³´ì´ì§€ë§Œ, ê·¸ ë‚´ë¶€ë¥¼ ë³´ë©´ ìˆ˜ë§ì€ ì„œë¹„ìŠ¤ê°€ ê°™ì´ ìˆë‹¤.
- í•˜ë‚˜ì˜ ê±°ëŒ€í•œ ë¹Œë”©ì„ ë³´ëŠ” ë“¯í•œ page folder ë•Œë¬¸ì— ë°°í¬ ì‹œê°„ë„, ì„œë¹„ìŠ¤ ì†ë„ë„, íŠ¸ë˜í”½ë„ ì ì°¨ ê°ë‹¹ì´ ë˜ì§€ ì•ŠìŒ.
- ë¼ì´ë¸ŒëŸ¬ë¦¬ í•˜ë‚˜ê°€ ëª‡ ë©”ê°€ì§œë¦¬ì¸ë°, í•œ í˜ì´ì§€ë¥¼ ìœ„í•´ ê±°ëŒ€í•œ ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ ì„¤ì¹˜í•´ë²„ë¦¬ë©´ ë‹¤ë¥¸ ì„œë¹„ìŠ¤ì—ë„ ì˜í–¥ì´ ê°€ê³  ë§˜.
- ê·¸ë¦¬í•˜ì—¬ ë§ˆì´í¬ë¡œì„œë¹„ìŠ¤ë¥¼ íƒí•˜ê²Œ ëœë‹¤.

### ì¦‰, ëª¨ë…¸ë ˆí¬ë€?

"ì—¬ëŸ¬ ê°œì˜ ê°œë³„ í”„ë¡œì íŠ¸ë¥¼, ì˜ ì •ì˜ëœ ê´€ê³„ë¥¼ í†µí•´ì„œ í•˜ë‚˜ì˜ Repoì— ë‹´ì€ ê²ƒ"
"Monorepo â‰  Monolith"

[ì½ì–´ë³´ë©´ ì¢‹ì€ ì•„í‹°í´](https://news.hada.io/topic?id=6061)

## yarn

yarnì„ ì‚¬ìš©í•˜ì—¬ ëª¨ë…¸ë ˆí¬ë¥¼ êµ¬ì¶•í•˜ëŠ” ë°©ë²•ì€ ë‘ ê°€ì§€ê°€ ìˆë‹¤. `yarn1`, `yarn berry`ê°€ ê·¸ê²ƒì´ë‹¤.
yarn1ì„ ì‚¬ìš©í•˜ì—¬ ëª¨ë…¸ë ˆí¬ë¥¼ êµ¬ì¶•í•˜ëŠ” ê²½ìš°ëŠ” ë³„ë¡œ ì—†ê³ , yarn berryë¡œ ê°€ëŠ” ê²½ìš°ê°€ ë§ì€ ë“¯ í•˜ë‹¤.

### yarn1

[yarn classic](https://classic.yarnpkg.com/en/docs/workspaces#toc-how-to-use-it)

#### 1. root package.json

ë‘ ì¤„ì˜ ì½”ë“œê°€ yarn1ì˜ ëª¨ë…¸ë ˆí¬ í•µì‹¬ì´ë‹¤.

```json title="package.json"
{
  "private": true,
  "workspaces": ["packages/*"]
}
```

#### 2. packages í´ë” í•˜ìœ„ì— workspace ìƒì„±í•˜ê¸°

```bash
mkdir packages
mkdir ./packages/common
mkdir ./packages/server
```

##### 1) common

ì´ì œ ê³µí†µ ëª¨ë“ˆì„ ë§Œë“¤ì–´ ë³¼ ê²ƒì´ë‹¤.

1. packages/common/package.json ìƒì„±

```json title="./packages/common/package.json"
{
  "name": "@study/common",
  "version": "1.0.0", // ë²„ì „ ëª…ì‹œ í•´ì£¼ì
  "main": "index.js", // mainì„ ê¼­ ì ì–´ì£¼ì
  "license": "MIT"
}
```

:::note ì§ˆë¬¸
<strong>package nameì— @ë¥¼ ê°™ì´ ë„£ì–´ì£¼ëŠ” ì´ìœ ê°€ ê¶ê¸ˆí•´ìš” ì»¨ë²¤ì…˜ì¼ê¹Œìš”?</strong>

ì´ëŠ” ê´€ìŠµì…ë‹ˆë‹¤. íŒ¨í‚¤ì§€ ë„¤ì„ì´ ê²¹ì¹˜ëŠ” ì¼ì´ ìˆì„ ìˆ˜ë„ ìˆê¸° ë•Œë¬¸ì— @ë¥¼ ì”ë‹ˆë‹¤. ë³´í†µ íšŒì‚¬ì´ë¦„ì„ ì•ì— ì“°ê±°ë‚˜ ë³¸ì¸ì˜ idë¥¼ ì”ë‹ˆë‹¤.
:::

2. packages/common/index.js ìƒì„±

```js
module.exports = () => {
  console.log('hello from common');
};
```

##### 2) server

ì„œë²„ í”„ë¡œì íŠ¸ì—ì„œ common ëª¨ë“ˆì„ ì“°ê¸° ìœ„í•´ ê¸°ì´ˆ ì„¸íŒ…ì„ í•´ì¤€ë‹¤.

1. packages/server/package.json ìƒì„±

```json title="./packages/server/package.json"
{
  "name": "@study/server",
  "version": "1.0.0",
  "main": "index.js",
  "scripts": {
    "dev": "node index.js"
  },
  "license": "MIT"
}
```

2. packages/server/index.js ìƒì„±

```js title="packages/server/index.js"
// server í”„ë¡œì íŠ¸ ì•ˆì—ì„œ common ëª¨ë“ˆì„ ê°€ì ¸ë‹¤ ì“¸ ìˆ˜ ìˆë„ë¡ í•œë‹¤. ì•„ì§ ì˜ì¡´í•˜ê¸° ì „ì´ë¯€ë¡œ ëª¨ë“ˆì„ ì°¾ì„ ìˆ˜ ì—†ì„ ê²ƒì´ë‹¤.
const foo = require('@study/common');

console.log('hello from server');

foo();
```

`common` í´ë”ëŠ” ê³µí†µìœ¼ë¡œ ê°€ì ¸ê°ˆ ìš”ì†Œì´ê³ , ì´ì œ `server`ê°€ `common` í”„ë¡œì íŠ¸ì— ì˜ì¡´í•˜ê²Œ ë§Œë“¤ ê²ƒì´ë‹¤.

#### 3. server ê°€ common ì— ì˜ì¡´í•˜ê²Œ í•˜ê¸°

```bash title="yarn1ì€ ë²„ì „ì„ ë’¤ì— ë¶™ì—¬ì£¼ì–´ì•¼ í•œë‹¤."
yarn workspace @study/server add @study/common@1.0.0
```

1. packages/server/package.json

```json title="./packages/server/package.json"
{
  "name": "@study/server",
  "version": "1.0.0",
  "main": "index.js",
  // highlight-start
  "dependencies": {
    "@study/common": "1.0.0"
  },
  // highlight-end
  "scripts": {
    "dev": "node index.js"
  },
  "license": "MIT"
}
```

```bash title="rootì—ì„œ ì‹¤í–‰í•´ë³´ê¸°"
yarn workspace @study/server dev
```

### yarn berry

#### 1. yarnì„ yarn berryë¡œ ì „í™˜í•˜ê¸°

```bash
// yarn ë²„ì „ í™•ì¸
yarn -v  // 1.22.17

// yarn ë²„ì „ ë³€ê²½
yarn set version berry
// ë˜ëŠ”
yarn set version stable

// yarn ë²„ì „ í™•ì¸
yarn -v // 3.3.0


// project í´ë” ìƒì„±
mkdir yarn-berry-workspace
cd yarn-berry-workspace
```

#### 2. yarn workspace íŒ¨í‚¤ê¸° ë§Œë“¤ê¸°

```bash
// packages ë””ë ‰í† ë¦¬ ë§Œë“¤ê¸° / ë£¨íŠ¸ ì´ˆê¸°í™”
yarn init -w
```

#### 3. root package.jsoníŒŒì¼ ìˆ˜ì •

```json title="package.json"
{
  "name": "yarn-berry-workspace-test",
  "packageManager": "yarn@3.3.0",
  "private": true,
  "workspaces": ["apps/*", "packages/*"]
}
```

- apps : service ëª¨ìŒ
- packages: ì°¸ì¡°ìš©. ê³µí†µ ui, ê³µí†µ í•¨ìˆ˜ ë“±â€¦ ëª¨ë“ˆì„ ëª¨ì•„ë‘ëŠ” ê³³.

#### 4. apps í´ë”ì— create next-app í”„ë¡œì íŠ¸ ì¶”ê°€

1. next project ì„¤ì¹˜

```bash
// 1. create-next-app í”„ë¡œì íŠ¸ ìƒì„±
cd apps
yarn create next-app
```

2. nextjs í”„ë¡œì íŠ¸ì—ì„œ package.json name ìˆ˜ì •í•˜ê¸°

```json title="apps/wanted/package.json"
{
  "name": "@wanted/web",
  "version": "1.0.0",
  "main": "index.js"
  // ...
}
```

3. pnp.cjsì—ì„œ ì •ë³´ë¥¼ ê°±ì‹ í•´ì¤˜ì•¼ í•˜ë¯€ë¡œ rootì—ì„œ ìƒíƒœë¥¼ ê°±ì‹ í•´ì¤€ë‹¤.

```bash
cd ..
yarn

yarn workspace @wanted/web run dev
```

:::tip
ìµœëŒ€í•œ ë£¨íŠ¸ ê²½ë¡œì—ì„œ í„°ë¯¸ë„ì„ ì…ë ¥í•´ë¼.

- ì˜ì¡´ì„±ë“¤ì„ ë£¨íŠ¸ì—ì„œ í†µí•©ìœ¼ë¡œ ê´€ë¦¬í•˜ê¸° ìœ„í•¨
- í”„ë¡œì íŠ¸ ë‚´ë¶€ì—ì„œ yarn ì‹¤í–‰ ì‹œ, ì˜ë„ì¹˜ ì•Šì€ ë™ì‘ì´ ë°œìƒí•  ìˆ˜ ìˆìŒ.

:::

4. ê³µí†µìœ¼ë¡œ ê°€ì ¸ê°ˆ libs ëª¨ë“ˆ ìƒì„±

- packages/libs ìƒì„±

```
cd packages/libs

yarn init
```

```json title="packages/libs/package.json"
{
  "name": "@wanted/libs",
  // versionê³¼ mainì„ ëª…ì‹œ
  // highlight-start
  "version": "1.0.0",
  "main": "./src/index.ts",
  // highlight-end
  "packageManager": "yarn@3.3.0"
}
```

```js title="packages/libs/src/index.ts"
export const sayHello = () => {
  return 'hello from lib';
};
```

ì´ì œ libs ì— íƒ€ì…ìŠ¤í¬ë¦½íŠ¸ë¥¼ ì¶”ê°€í•˜ê³  nextjsì—ì„œ libs(TS)ë¥¼ ì˜ì¡´í•˜ê²Œ í•  ê²ƒì´ë‹¤.

```bash title="rootì—ì„œ"
// libì— ts ì¶”ê°€
yarn workspace @wanted/libs add typescript -D

// next web projectì—ì„œ libs ì˜ì¡´(ì¶”ê°€)
yarn workspace @wanted/web add @wanted/libs
```

```json title="packages/libs/package.json"
{
  "name": "@wanted/lib",
  "version": "1.0.0",
  "private": true,
  "main": "./src/index.ts",
  "dependencies": {
    "typescript": "^4.9.3"
  }
}
```

```json title="packages/libs/tsconfig.json"
{
  "$schema": "https://json.schemastore.org/tsconfig",
  "extends": "../../tsconfig.base.json",
  "compilerOptions": {
    "module": "ESNext",
    "moduleResolution": "node",
    "target": "ESNext",
    "lib": ["ESNext"],
    "esModuleInterop": true,
    "allowSyntheticDefaultImports": true,
    "baseUrl": "./src",
    "noEmit": false,
    "incremental": true,
    "resolveJsonModule": true,
    "paths": {}
  },
  "exclude": ["**/node_modules", "**/.*/", "./dist", "./coverage"],
  "include": ["**/*.ts", "**/*.js", "**/.cjs", "**/*.mjs", "**/*.json"]
}
```

```json title="apps/wanted/package.json"
{
  "name": "@wanted/web",
  "version": "0.1.0",
  "private": true,
  "scripts": {
    "dev": "next dev",
    "build": "next build",
    "start": "next start",
    "lint": "next lint"
  },
  "dependencies": {
    "@emotion/react": "^11.10.5",
    "@types/node": "18.11.9",
    "@types/react": "18.0.25",
    "@types/react-dom": "18.0.9",
    // highlight-start
    "@wanted/libs": "workspace:^",
    // highlight-end
    "eslint": "8.28.0",
    "eslint-config-next": "13.0.4",
    "next": "13.0.4",
    "react": "18.2.0",
    "react-dom": "18.2.0",
    "typescript": "4.9.3"
  }
}
```

:::tip
projectëŠ” ëª¨ë“ˆì´ ì•„ë‹ˆë¯€ë¡œ mainì´ ì—†ë‹¤.
:::

#### 5. ts error ë°”ë¡œ ì¡ê¸°

`./apps/wanted/pages/index.tsx`ì—ì„œ ts errorê°€ ë‚˜ê¸° ì‹œì‘í•œë‹¤.
yarn berryëŠ” npmê³¼ ëª¨ë“ˆì„ ë¶ˆëŸ¬ì˜¤ëŠ” ë°©ì‹ì´ ë‹¤ë¥´ê¸° ë•Œë¬¸.

```bash
yarn add -D typescript
yarn dlx @yarnpkg/sdks vscode
```

#### 6. yarn PnP ì‚¬ìš©ì„ ìœ„í•œ vscode extension ì„¤ì¹˜: arcanis.vscode-zipfs

arcanis.vscode-zipfs ì„¤ì¹˜ í›„, ë‹¤ìŒ ì»¤ë§¨ë“œ ì¶”ê°€

```json title=".vscode/extensions.json"
{
  "recommendations": ["arcanis.vscode-zipfs"]
}
```

- ì´í›„ vscode ìš°ì¸¡ í•˜ë‹¨ì— allow ëŒ€í™”ìƒìê°€ ëœ¨ë©´ í—ˆìš©

ì•ˆ ëœ¬ë‹¤ë©´ ì•„ë˜ì²˜ëŸ¼ í•´ë³¸ë‹¤.

1. yarn dlx @yarnpkg/sdks vscode
2. TypeScript file ì•„ë¬´ê±°ë‚˜ í•˜ë‚˜ ì—´ì–´ë³¸ë‹¤.
3. ctrl+shift+p
4. "Select TypeScript Version" ì„ íƒ
5. "Use Workspace Version"

#### 7. apps/wanted/pages/index.tsx íŒŒì¼ì—ì„œ @wanted/libs ëª¨ë“ˆ ì‚¬ìš©í•´ë³´ê¸°

```tsx title="apps/wanted/pages/index.tsx"
import {sayHello} from '@wanted/libs';

export default function Home() {
  return (
    {sayHello()}
  )
}
```

```bash
yarn workspace @wanted/web run dev
```

### react ui ê³µí†µ ëª¨ë“ˆë¡œ ê°€ì ¸ê°€ê¸°

1. packagesì— ui ì¶”ê°€

```shell
cd packages/ui
yarn init
```

- package.json íŒŒì¼ì„ ì—´ì–´ì„œ nameì„ `@wanted/ui`ë¡œ ë³€ê²½.

2. react dependency ì„¤ì¹˜

```shell
cd ../../
yarn
yarn workspace @wanted/ui add typescript react react-dom @types/node @types/react @types/react-dom -D
```

3. tsconfig ì„¤ì •

```json title="packages/ui/tsconfig.json"
{
  "$schema": "https://json.schemastore.org/tsconfig",
  "extends": "../../tsconfig.base.json",
  "compilerOptions": {
    "baseUrl": "./src",
    "target": "esnext",
    "lib": ["dom", "dom.iterable", "esnext"],
    "module": "esnext",
    "jsx": "react-jsx",
    "noEmit": false,
    "incremental": true
  },
  "exclude": ["**/node_modules", "**/.*/", "dist", "build"]
}
```

- `packages/ui/src/index.ts`, `packages/ui/src/Button.tsx` íŒŒì¼ ìƒì„±

```javascript title="packages/ui/src/Button.tsx"
import { ButtonHTMLAttributes, MouseEventHandler, ReactNode } from 'react';
export type ButtonProps = ButtonHTMLAttributes<HTMLButtonElement> & {
  children: ReactNode,
  onClick?: MouseEventHandler<HTMLButtonElement>,
};
const Button = (props: ButtonProps) => {
  const { children, onClick, ...other } = props;
  return (
    <button type='button' onClick={onClick} {...other}>
      {children}
    </button>
  );
};
export default Button;
```

```javascript title="packages/ui/src/index.ts"
export { default as Button } from './Button';
```

- `packages/ui/package.json`ì— main ì¶”ê°€

```json title="packages/ui/package.json"
{
  "name": "@wanted/ui",
  "packageManager": "yarn@3.3.0",
  "main": "src/index.ts",
  "devDependencies": {
    "@types/node": "^18.11.11",
    "@types/react": "^18.0.26",
    "@types/react-dom": "^18.0.9",
    "react": "^18.2.0",
    "react-dom": "^18.2.0",
    "typescript": "^4.9.3"
  }
}
```

4. `apps/wanted` ì—ì„œ `packages/ui` ì‚¬ìš©

```shell title="root ì—ì„œ @wanted/ui ì˜ì¡´ì„± ì„¤ì¹˜"
yarn workspace @wanted/web add @wanted/ui
```

- `apps/wanted/pages/index.tsx` íŒŒì¼ ìˆ˜ì •

<details>
<summary>í† ê¸€ ì ‘ê¸°/í¼ì¹˜ê¸°</summary>

```javascript
import { sayHello } from '@wanted/lib';
// highlight-next-line
import { Button } from '@wanted/ui'; //ì¶”ê°€
import Head from 'next/head';
import Image from 'next/image';
import styles from '../styles/Home.module.css';
export default function Home() {
  return (
    <div className={styles.container}>
      // ...
      <main className={styles.main}>
        <h1 className={styles.title}>
          Welcome to <a href="https://nextjs.org">Next.js!</a>
        </h1>
        <h2>{sayHello()}</h2>
        // highlight-next-line
        <Button>Hello From @wanted/ui</Button> // ì¶”ê°€
        // ...
    </div>
  );
}
```

</details>

5. `@wanted/web`ì—ì„œ javascriptë¡œ ë³€í™˜(transpile)

```shell title="next-transpile-modules ì„¤ì¹˜"
yarn workspace @wanted/web add next-transpile-modules
```

- `apps/wanted/next.config.js` íŒŒì¼ ìˆ˜ì •

```javascript title="apps/wanted/next.config.js"
// @wanted/ui íŒ¨í‚¤ì§€ë¥¼ tranpile ì‹œí‚¨ë‹¤.
const withTM = require('next-transpile-modules')(['@wanted/ui']);
/** @type {import('next').NextConfig} */
const nextConfig = {
  reactStrictMode: true,
  swcMinify: true,
};
module.exports = withTM(nextConfig);
```

- ì‹¤í–‰

```
yarn workspace @wanted/web dev
```

### íƒ€ì…ì²´í¬

#### ê³µí†µìœ¼ë¡œ ì“°ëŠ” ì–´ë–¤ uiì— propì´ ì¶”ê°€ë˜ì—ˆì„ ë•Œ, ì´ uië¥¼ ì“°ê³  ìˆëŠ” í”„ë¡œì íŠ¸ì˜ íƒ€ì…ì´ ì˜¬ë°”ë¥¸ì§€ ì²´í¬í•´ì£¼ê¸° ìœ„í•¨ì´ë‹¤.

1. ë‹¤ìŒì„ ì¶”ê°€í•œë‹¤.

- `apps/wanted/package.json`
- `packages/lib/package.json`
- `packages/ui/package.json`

ê° package.jsonì— ê°™ì€ ìŠ¤í¬ë¦½íŠ¸ ì¶”ê°€

```json title="package.json"
"scripts": {
  "typecheck": "tsc --project ./tsconfig.json --noEmit"
},
```

2. Button ì»´í¬ë„ŒíŠ¸ì— ë¸Œë ˆì´í‚¹ ì²´ì¸ì§€ ë°œìƒ ì‹œí‚¤ê¸°.

- `packages/ui/src/Button.tsx`ì˜ props typeì— `variant` ì¶”ê°€ í•´ë³¸ë‹¤.

```javascript
import { ButtonHTMLAttributes, MouseEventHandler, ReactNode } from 'react';
export type ButtonProps = ButtonHTMLAttributes<HTMLButtonElement> & {
  children: ReactNode,
  // highlight-next-line
  variant: 'contained' | 'outlined',
  onClick?: MouseEventHandler<HTMLButtonElement>,
};
const Button = (props: ButtonProps) => {
  const { children, onClick, ...other } = props;
  return (
    <button type='button' onClick={onClick} {...other}>
      {children}
    </button>
  );
};
export default Button;
```

```shell
yarn workspace @wanted/web typecheck
```

3. ëª¨ë“  í”„ë¡œì íŠ¸ë¥¼ íƒ€ì…ì²´í¬í•˜ëŠ” ë°©ë²•  
   yarn workspaceì—ì„œ ê´€ë¦¬í•˜ê¸° ìœ„í•œ ê¸°ë³¸ pluginì„ ì œê³µí•´ì¤ë‹ˆë‹¤.
   https://yarnpkg.com/api/modules/plugin_workspace_tools.html

```shell
yarn plugin import workspace-tools
```

- root package.json ìˆ˜ì •í•˜ê¸°

```json title="root package.json"
"scripts": {
  "g:typecheck": "yarn workspaces foreach -pv run typecheck"
},
```

`g:*`ë¥¼ ë¶™ì—¬ì£¼ëŠ”ê±´ global í•˜ê²Œ ëª¨ë“  í”„ë¡œì íŠ¸ë¥¼ ì‹¤í–‰í•œë‹¤ëŠ” ì˜ë¯¸ë¡œ ë¶™ì—¬ì£¼ì—ˆë‹¤.

- ì´ì œ `yarn g:typecheck` ì‹¤í–‰í•´ë³´ì

```shell
yarn g:typecheck
```

## ê¸°íƒ€ íŒ

1. ë£¨íŠ¸ì— `.vscode` í´ë”ê°€ ìˆëŠ” í”„ë¡œì íŠ¸ëŠ” ì¶”ì²œ ìµìŠ¤í…ì…˜ì„ ì„¤ì¹˜í•˜ëŠ” ê±¸ ê¶Œì¥í•˜ëŠ” ì°½ì„ ëœ¨ê²Œ í•˜ê±°ë‚˜, vscodeì˜ ì„¤ì •ì„ ì‚¬ìš©ìê°€ ê·¸ëŒ€ë¡œ ì“¸ ìˆ˜ ìˆë„ë¡ í•œë‹¤.
2. í•´ë‹¹ í”„ë¡œì íŠ¸ê°€ ë…¸ë“œ 16 ë²„ì „ìœ¼ë¡œ ê°œë°œë˜ì—ˆë‹¤ë©´, ë£¨íŠ¸ì— `.nvmrc`íŒŒì¼ì„ ë§Œë“¤ê³  `v16` ì´ë¼ê³  ì ì–´ì£¼ì.
   - `nvm`ì„ ì‚¬ìš©í•´ì•¼ í•¨
   - ì„¤ì • í›„ ë…¸ë“œ ë²„ì „ì„ ë§ì¶”ê³ ì í•œë‹¤ë©´ vscodeë¥¼ ê»ë‹¤ ì¼œì•¼í•¨.
3. `git stash`: í•˜ë˜ ì‘ì—…ì„ ì„ì‹œë¡œ ì €ì¥í•˜ê¸° ìœ„í•´ ì‚¬ìš©í•˜ëŠ” ê¹ƒ ëª…ë ¹ì–´
   - ì‘ì—… ì¤‘ ë‹¤ë¥¸ ìš”ì²­ì´ ë“¤ì–´ì™€ í•˜ë˜ ì‘ì—…ì„ ë©ˆì¶”ê³  ì ì‹œ ë¸Œëœì¹˜ë¥¼ ë³€ê²½í•˜ê³ ì í•  ë•Œ ì‚¬ìš©í•œë‹¤.
4. peerDependencies : í˜¸í™˜ì„±ì´ í•„ìš”í•œ ê²½ìš° ëª…ì‹œí•œë‹¤.

   ```json title="react 17 ë²„ì „ë§Œ ì‚¬ìš©í•˜ì‹œì˜¤"
   "peerDependencies": {"react": "17"},
   //ì´ ê²½ìš°, react 18 ë²„ì „ì˜ í›…ì„ ì‚¬ìš©í•˜ë ¤ê³  í•˜ë©´ ì—ëŸ¬ê°€ ë°œìƒí•œë‹¤.
   ```

:::note
í˜¸í™˜ì„±ì— ë”°ë¥´ì§€ ì•Šì„ ì‹œ, yarnì€ ì•ˆì „í•˜ì§€ ì•Šë‹¤ëŠ” ê²½ê³  ë¬¸êµ¬ë¥¼ ë˜ì ¸ì¤€ë‹¤.

â¤ YN0060: â”‚ @wanted/web@workspace:apps/wanted provides react (pfda8b) with version 18.2.0, which doesn't satisfy what @wanted/ui and some of its descendants request

â¤ YN0000: â”‚ Some peer dependencies are incorrectly met; run yarn explain peer-requirements hash for details, where 'hash' is the six-letter p-prefixed code
:::

```json title="react 17 ë²„ì „ ì´ìƒì„ ì‚¬ìš©í•˜ì‹œì˜¤"
"peerDependencies": {"react": "^17"},
```

## Q&A

ğŸ£: ëª¨ë…¸ë ˆí¬ë¥¼ êµ¬ì¶•í•  ë•Œ yarn workspace + lerna ì¡°í•©ì„ ë§ì´ ì“°ë˜ë°, yarn workspaceë§Œìœ¼ë¡œë„ ëª¨ë…¸ë ˆí¬ êµ¬ì¶•ì´ ì¶©ë¶„í•œì§€ ê¶ê¸ˆí•©ë‹ˆë‹¤.
ğŸ¦Š: ì¶©ë¶„íˆ ê°€ëŠ¥í•˜ë‹¤. ëŸ¬ë‚˜ëŠ” ê³ ìˆ˜ì¤€ì˜ íˆ´ì„. ë¼ì´ë¸ŒëŸ¬ë¦¬ í´ë”ë¥¼ ìˆ˜ì •í•˜ê³  ì»¤ë°‹í–ˆì„ ë•Œ, ì¶”ê°€ì ìœ¼ë¡œ ë‚´ë¶€ íŒ¨í‚¤ì§€ì§€ë§Œ npmì— publish í•  ìˆ˜ ìˆë‹¤. ê·¸ëŸ¬ë©´ ìˆ˜ì •ì‚¬í•­ì— ë”°ë¼ì„œ ë²„ì „ ì •ë³´ê°€ ì¤‘ìš”í•˜ë‹¤. ëŸ¬ë‚˜ëŠ” ì´ëŸ° ê²ƒì„ ìë™í™”í•´ì¤€ë‹¤.

---

ğŸ£: ë©€í‹°ë ˆí¬ë¡œ ë§Œë“¤ì—ˆë˜ í”„ë¡œì íŠ¸ë¥¼ ëª¨ë…¸ë ˆí¬ë¡œ ë§ˆì´ê·¸ë ˆì´ì…˜ í•œë‹¤ê³  í•  ë•Œ, ê¸°ì¡´ì˜ ë ˆí¬ë¥¼ ëª¨ë…¸ë ˆí¬ë¡œ ì „í™˜í•˜ëŠ”ì‹ìœ¼ë¡œ ì§„í–‰í•˜ë‚˜ìš”? ì•„ë‹ˆë©´ ìƒˆë¡œìš´ ëª¨ë…¸ë ˆí¬ í”„ë¡œì íŠ¸ì— ê¸°ì¡´ ì½”ë“œë“¤ì„ ê°€ì ¸ì˜¤ëŠ” ë°©ì‹ìœ¼ë¡œ ì§„í–‰ë˜ë‚˜ìš”?
ğŸ¦Š: ì–‘ìª½ ë‹¤ ê³ ë ¤í•´ë³¼ ìˆ˜ ìˆë‹¤. ì½”ë“œì˜ íˆìŠ¤í† ë¦¬ê°€ ì¤‘ìš”í•˜ë‹¤ë©´ ê¸°ì¡´ ë ˆí¬ì—ì„œ ë‹¤ë¥¸ ë ˆí¬ë¡œ ì´ë™í• ë•Œ íˆìŠ¤í† ë¦¬ë¥¼ ê°™ì´ ê°€ì ¸ê°ˆ ìˆ˜ ìˆëŠ” git ëª…ë ¹ì–´ê°€ ìˆë‹¤. ê°œì¸ì ìœ¼ë¡œ ì•ˆì •ì ì¸ ê±´ í›„ìì¸ ê²ƒ ê°™ë‹¤.

:::note
--mirrorë¥¼ ì‚¬ìš©í•˜ë©´ ì €ì¥ì†Œì˜ ì†ŒìŠ¤ì™€ ì»¤ë°‹ íˆìŠ¤í† ë¦¬ê¹Œì§€ ë³µì‚¬í•  ìˆ˜ ìˆë‹¤.
ì»¤ë°‹ íˆìŠ¤í† ë¦¬ë„ ë³µì‚¬í•˜ê¸°ì—, ì´ë™ í›„ì—ë„ ì½”ë“œì˜ ê³¼ê±° ì‘ì—…ì„ ì¶”ì í•  ìˆ˜ ìˆë‹¤.

```
git clone --mirror https:://github.com/username/move-test-one
cd move-test-one.git
git remote set-url --push origin https:://github.com/username/new-test-one
git push --mirror
```

[ì¶œì²˜](https://mong-blog.tistory.com/entry/Git-%EC%A0%80%EC%9E%A5%EC%86%8C%EB%A5%BC-%EB%8B%A4%EB%A5%B8-%EC%A0%80%EC%9E%A5%EC%86%8C%EB%A1%9C-%ED%86%B5%ED%95%A9%ED%95%98%EB%8A%94-2%EA%B0%80%EC%A7%80-%EB%B0%A9%EB%B2%95git-history-%EC%9C%A0%EC%A7%80)
:::

---

ğŸ£: ë°±ì—”ë“œê°€ js ìª½ í”„ë ˆì„ì›Œí¬ë¥¼ ì„ íƒí•œë‹¤í–ˆì„ ë•Œ ë°±ì—”ë“œê¹Œì§€ ëª¨ë…¸ë ˆí¬ë¡œ ê°™ì´ ê´€ë¦¬í•˜ëŠ”ê²Œ ì¢‹ì„ì§€ ë°±ì—”ë“œëŠ” ë”°ë¡œ ë¶„ë¦¬ì‹œí‚¤ëŠ”ê²Œ ì¢‹ì„ì§€ë„ ê¶ê¸ˆí•©ë‹ˆë‹¤!

ğŸ¦Š: ê°™ì´ ìˆëŠ”ê²Œ ì¢‹ë‹¤ê³  ë³¸ë‹¤. api ì‘ë‹µ ëª¨ë¸ë“¤ì´ DTOë„ ìˆì„ ê²ƒì„. ëª¨ë…¸ë ˆí¬ë¡œ shareí•˜ë©´ ì¢‹ì„ ê±° ê°™ë‹¤.

---

ğŸ£: @wanted/webë§Œ clone ë°›ì•˜ì„ ë•Œì—ë„ @wanted/lib ì°¸ì¡°ê°€ ê°€ëŠ¥í•œê°€ìš”?

ğŸ¦Š: ë¶ˆê°€ëŠ¥í•˜ë‹¤. í•œìª½ë§Œ ë°›ì„ ìˆ˜ ì—†ìŒ.

---

ğŸ£: cacheëœ íŒ¨í‚¤ì§€ë“¤ì´ ë‹¤ gitignore ì•ˆë˜ê³  ìˆëŠ”ë°, ì´ê²ƒë“¤ì„ ì›ê²© ì €ì¥ì†Œì— ì˜¬ë¦¬ëŠ” í¸ì´ ì¢‹ì€ê°€ìš”? (yarn-berry ì‚¬ìš©ì‹œì— ì´ë ‡ê²Œë„ í•œë‹¤ê³  ë“¤ì–´ë³¸ ê²ƒ ê°™ì•„ì„œ ì˜ë„ëœê±´ê°€ ì‹¶ì–´ì„œìš”)

ğŸ¦Š: ì·¨í–¥ì˜ ì˜ì—­. ì¦‰, ì˜¬ë ¤ë„ ë˜ê³  ì•ˆ ì˜¬ë ¤ë„ ëœë‹¤. `.cache`ë¥¼ ê°™ì´ ì €ì¥ì†Œì— ì˜¬ë¦¬ë©´ zero-install ì´ ëœë‹¤. ì´ë ‡ê²Œ í•˜ë©´ ì˜ì¡´ì„±ì„ ì„¤ì¹˜ ì•ˆ í•´ë„ í”„ë¡œì íŠ¸ê°€ ëŒì•„ê°„ë‹¤.
[í† ìŠ¤ ë§í¬ë¥¼ ì°¸ì¡°](https://toss.tech/article/node-modules-and-yarn-berry)í•´ë³´ì‹œë¼.

---

ğŸ£: yarn1ì„ ì“¸ì¼ì´ ì—†ë‹¤ê³  í•˜ì…¨ëŠ”ë° ì™œ ê·¸ëŸ°ê°€ìš”? ì €í¬ íšŒì‚¬ì—ì„œëŠ” pnpë¥¼ ì§€ì›í•˜ì§€ ì•ŠëŠ” íŒ¨í‚¤ì§€ê°€ ì—¬ëŸ¿ ìˆê³ , í° ê¸°ëŠ¥ì´ í•„ìš”ì—†ê³  ì»´í¬ë„ŒíŠ¸ë‚˜ ê¸°ëŠ¥ë§Œ ê³µí†µìœ¼ë¡œ ê°€ì ¸ê°€ê¸° ìœ„í•´ yarn1ì„ ì‚¬ìš©í•˜ë ¤ê³  í–ˆì—ˆëŠ”ë°ìš”, yarn berryë¡œ ì‹œì‘í•˜ëŠ” ì´ìœ ê°€ ìˆìœ¼ì‹¤ê¹Œìš”. ë‹¨ì§€ yarn berryê°€ yarn 1ë³´ë‹¤ ë” ì§€ì›í•˜ëŠ” ê¸°ëŠ¥ì´ ë§ì•„ì„œì¸ê°€ìš”?

ğŸ¦Š: yarn berry ì—ì„œë„ pnp ì‚¬ìš©í•˜ì§€ ì•Šê³  ì“¸ ìˆ˜ ìˆìŒ. `nodelinker`ë¼ëŠ” ê²Œ ìˆìŒ. `.yarnnrc.yml`íŒŒì¼ì— `nodeLinker: node-modules`ë¥¼ ì¶”ê°€í•˜ë©´ ê°€ëŠ¥. ì´ëŠ” pnp ëª¨ë“œë¥¼ ì‚¬ìš©í•˜ì§€ ì•Šê² ë‹¤ë¼ëŠ” ëœ»ì´ë‹¤.
[ì°¸ì¡°](https://yarnpkg.com/getting-started/migration)

---

ğŸ£: yarn berry ë¡œ ë°”ë€Œì—ˆì„ ë•Œ ìƒê¸°ëŠ” `yarnrc.yml` íŒŒì¼ì—ì„œ yarnPath: `.yarn/releases/yarn-3.3.0.cjs` ê°€ ì–´ë–¤ ê²ƒì„ ì˜ë¯¸í•˜ëŠ”ì§€ ê¶ê¸ˆí•©ë‹ˆë‹¤!

ğŸ¦Š: yarnì€ ì „ì—­ì ìœ¼ë¡œ ì„¤ì¹˜ë˜ëŠ”ë°, yarnì„ ì„¤ì¹˜ ì•ˆ í•´ë„ ì“°ê² ë‹¤ëŠ” ê²ƒ. ì œë¡œì¸ìŠ¤í†¨ê³¼ ê°™ì€ ê°œë…ì´ë‹¤.

---

ğŸ£: packageë¥¼ ë‚´ë¶€ ì„œë¹„ìŠ¤ì—ì„œ import í•  ë•Œ ê¼­ indexì—ì„œ export í•´ì¤€ ê²ƒë§Œ importí•  ìˆ˜ ìˆì„ê¹Œìš”? í´ë”êµ¬ì¡°ê°€ ê¹Šì–´ì§€ë©´ ì¼ì¼ì´ export í•´ì£¼ê¸°ê°€ ê¹Œë‹¤ë¡œìš¸ ê²ƒ ê°™ì•„ì„œìš”

ğŸ¦Š: ì—”íŠ¸ë¦¬ ì¸ë±ìŠ¤ë¥¼ ì¡ì•„ì£¼ê³  ì¨ì•¼ í¸ë¦¬í•˜ë‹¤. (ì•ˆí•˜ë©´ ë”ëŸ¬ì›Œì§)

---

ğŸ£: root íŒ¨í‚¤ì§€ì— workspaceë¡œ ì¶”ê°€ë˜ì–´ìˆëŠ” packagesì˜ í•˜ìœ„ í´ë”ë¥¼ ë§Œë“¤ë•Œ, íŠ¹ë³„í•œ ì»¤ë§¨ë“œë¡œ ë§Œë“¤ì–´ì¤˜ì•¼í•˜ë‚˜ìš”?

- package.json íŒŒì¼ì´ ìë™ìƒì„± ì•ˆë˜ê¸¸ë˜ ê¶ê¸ˆí•´ìš”.
- í•˜ìœ„ í´ë”ì—ì„œ ì§ì ‘ yarn init í•´ì£¼ëŠ”ê±´ì§€..?

ğŸ¦Š: package.jsonì„ ìˆ˜ë™ìœ¼ë¡œ ë§Œë“¤ì–´ì¤˜ì•¼ í•œë‹¤. ì¦‰, í•˜ìœ„ í´ë”ì—ì„œ ì§ì ‘ yarn init í•´ì£¼ì–´ì•¼ í•œë‹¤.

---

ğŸ£: yarn1ì—ì„œ ì„¤ì¹˜ëœ ë¼ì´ë¸ŒëŸ¬ë¦¬ ë‚´ë¶€ë¥¼ ë³¼ ë•Œ node_modulesì•ˆì—ì„œ ë³´ê³  ìˆ˜ì •í•  ìˆ˜ ìˆëŠ”ë° yarn berryì—ì„œëŠ” ì–´ë””ì„œ í™•ì¸í•˜ê³  ìˆ˜ì •í•  ìˆ˜ ìˆì„ê¹Œìš”??

ğŸ¦Š: pnpëŠ” ì´ë ‡ê²Œ ìˆ˜ì •í•˜ëŠ” ê²ƒì´ ì•ˆëœë‹¤.

---

ğŸ£: ëª¨ë…¸ë ˆí¬ì˜ packages ë¥¼ githubì˜ submodule ë¡œ ê´€ë¦¬í•˜ëŠ” ê²ƒë„ ê´œì°®ì€ì§€ ê¶ê¸ˆí•©ë‹ˆë‹¤

ğŸ¦Š: ì„œë¸Œëª¨ë“ˆë¡œ ë‚´ë³´ë‚´ì„œ ì¨ë¼. ëŸ¬ë‚˜ì²˜ëŸ¼â€¦

---

ğŸ£: packagesì— íƒ€ì…ìŠ¤í¬ë¦½íŠ¸ë¥¼ ì„¤ì¹˜í•˜ê³  apps ë‚´ì˜ í”„ë¡œì íŠ¸ê°€ packagesì˜ íƒ€ì…ìŠ¤í¬ë¦½íŠ¸ì— ì˜ì¡´í•˜ë”ë¼ë„, ê° í”„ë¡œì íŠ¸ ë‚´ì—ì„œë„ íƒ€ì…ìŠ¤í¬ë¦½íŠ¸ë¥¼ ì“°ê¸° ìœ„í•´ì„  apps ë‚´ì— ê°ê° íƒ€ì…ìŠ¤í¬ë¦½íŠ¸ë¥¼ ë”°ë¡œ ë˜ ì„¤ì¹˜í•´ì£¼ì–´ì•¼ í•˜ëŠ” ê±´ê°€ìš”?

ğŸ¦Š: ë„µ. typesciprtë¥¼ ë”°ë¡œ ì„¤ì¹˜í•´ì£¼ì…”ì•¼ í•©ë‹ˆë‹¤.

---

ğŸ£: ëª¨ë…¸ë ˆí¬ë¥¼ ë„ì…í•˜ë©´ ì—¬ëŸ¬ í”„ë¡œì íŠ¸ê°€ ìŒ“ì¼ìˆ˜ë¡ ì ì  ë” ë¬´ê±°ì›Œì§ˆ ê±° ê°™ì€ë°ìš”, ì´ëŸ´ ë•Œ vscodeë‚˜ ideê°€ ì˜ ëŒì•„ê°€ë‚˜ìš”? ì˜ˆë¥¼ ë“¤ì–´ tsë¥¼ ì˜ ëª»ì¡ì•„ì¤€ë‹¤ë“ ì§€... ëª‡ ë°•ì ëŠ¦ê²Œ eslintê°€ ì¡ì•„ì¤€ë‹¤ë“ ì§€ í•˜ëŠ” ë”œë ˆì´ìš”. í”„ë¡œì íŠ¸ê°€ ì»¤ì§ˆìˆ˜ë¡ vscê°€ í˜ë“¤ì–´í•˜ëŠ” ê±° ê°™ì€ë° ì´ëŸ° í”„ë¡œì íŠ¸ê°€ ì—¬ëŸ¬ ê°œë©´ ê°œë°œí•˜ëŠ”ë°ë„ ë¬¸ì œê°€ ìˆì§€ ì•Šì„ê¹Œ ì‹¶ì–´ì„œìš”.

ğŸ¦Š: vscodeì—ì„œ eslintê°€ ì˜¤ë˜ê±¸ë¦¬ëŠ” í˜„ìƒì´ ìˆë‹¤ë©´,

- vscode eslint ì…‹íŒ…
- eslint cache ì„¤ì •
- husky ì…‹íŒ…
- ëª¨ë‹ˆí„°ë§ ë°±ì‹  í”„ë¡œê·¸ë¨ ì¶œë™

ìœ„ 4ê°€ì§€ë¥¼ ì‚´í´ë³´ì‹œë©´ ì¢‹ì„ ê²ƒ ê°™ì•„ìš”.

ì¶”ê°€ë¡œ, ëª¨ë…¸ë ˆí¬ repositoryê°€ ì»¤ì§€ë©´
git clone, checkout ë“±ë“± ì†ë„ê°€ ëŠë ¤ì§€ëŠ” ë¬¸ì œê°€ ìˆëŠ”ë°ìš”.
ì´ë¶€ë¶„ì€ ê¹Šê²Œ ë³´ì§€ëŠ” ì•Šì•„ì„œ, ëŒ€ëµì ìœ¼ë¡œë§Œ ë§ì”€ë“œë¦¬ë©´,

githubì—ì„œ monorepo repoê°€ ì»¤ì¡Œì„ë•Œ ë°œìƒë˜ëŠ” ë¬¸ì œì ë“¤ì„ ì˜¤ë˜ì „ë¶€í„° ì¸ì§€í•˜ê³  ìˆì—ˆê³ ,
ì´ë¥¼ ê·¹ë³µí•˜ëŠ” ë‹¤ì–‘í•œ ê¸°ëŠ¥ë“¤ì„ ë‚´ë†“ê³  ìˆìŠµë‹ˆë‹¤.

- sparse-checkout
- git clone --filter=blob:none

github ë¸”ë¡œê·¸ì— ë°©ë¬¸í•´ë³´ì‹œë©´ githubì—ì„œ monorepoì—ì„œ ì œê³µí•˜ëŠ” ê¸°ëŠ¥ë“¤ì„ ì‚´í´ ë³¼ìˆ˜ ìˆìŠµë‹ˆë‹¤.
https://github.blog/?s=monorepo
