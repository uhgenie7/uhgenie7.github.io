"use strict";(self.webpackChunkgenie_log=self.webpackChunkgenie_log||[]).push([[7317],{6055:n=>{n.exports=JSON.parse('{"blogPosts":[{"id":"/Introduction","metadata":{"permalink":"/en/blog/Introduction","editUrl":"https://github.com/uhgenie7/uhgenie7.github.io/edit/main/blog/Introduction.md","source":"@site/blog/Introduction.md","title":"Introduction","description":"\uc0c8\ub85c\uc774 \uc54c\uac8c\ub41c \uac83\uc774\ub098 \ud68c\uace0 \ub4f1 \uac00\ubccd\uac8c \uc815\ub9ac\ud558\ub294 \uce74\ud14c\uace0\ub9ac\uc785\ub2c8\ub2e4.","date":"2022-10-15T05:24:42.000Z","formattedDate":"October 15, 2022","tags":[],"readingTime":0.285,"hasTruncateMarker":false,"authors":[],"frontMatter":{},"nextItem":{"title":"NextJS \ud504\ub85c\uc81d\ud2b8 \ucd5c\uc801\ud654 \ud558\uae30","permalink":"/en/blog/nextjs-optimization"}},"content":"\uc0c8\ub85c\uc774 \uc54c\uac8c\ub41c \uac83\uc774\ub098 \ud68c\uace0 \ub4f1 \uac00\ubccd\uac8c \uc815\ub9ac\ud558\ub294 \uce74\ud14c\uace0\ub9ac\uc785\ub2c8\ub2e4.  \\n\uc0c8\ub85c\uc774 \uc54c\uac8c\ub41c \uac83\uc740 \uac80\uc99d\ub41c \ub798\ud37c\ub7f0\uc2a4\uac00 \ubaa8\uc774\uba74 \uac1c\ubc1c \uce74\ud14c\uace0\ub9ac\ub85c \uc62e\uaca8\uc9d1\ub2c8\ub2e4."},{"id":"/nextjs-optimization","metadata":{"permalink":"/en/blog/nextjs-optimization","editUrl":"https://github.com/uhgenie7/uhgenie7.github.io/edit/main/blog/nextjs-optimization.md","source":"@site/blog/nextjs-optimization.md","title":"NextJS \ud504\ub85c\uc81d\ud2b8 \ucd5c\uc801\ud654 \ud558\uae30","description":"NextJS\uac00 \uc81c\uacf5\ud558\ub294 \uae30\ub2a5\uc73c\ub85c \ucd5c\uc801\ud654\ud569\ub2c8\ub2e4","date":"2022-10-14T00:00:00.000Z","formattedDate":"October 14, 2022","tags":[{"label":"\ucd5c\uc801\ud654","permalink":"/en/blog/tags/\ucd5c\uc801\ud654"},{"label":"nextjs","permalink":"/en/blog/tags/nextjs"}],"readingTime":6.455,"hasTruncateMarker":true,"authors":[],"frontMatter":{"title":"NextJS \ud504\ub85c\uc81d\ud2b8 \ucd5c\uc801\ud654 \ud558\uae30","description":"NextJS\uac00 \uc81c\uacf5\ud558\ub294 \uae30\ub2a5\uc73c\ub85c \ucd5c\uc801\ud654\ud569\ub2c8\ub2e4","tags":["\ucd5c\uc801\ud654","nextjs"],"date":"2022-10-14"},"prevItem":{"title":"Introduction","permalink":"/en/blog/Introduction"}},"content":"NextJS\uac00 \uc81c\uacf5\ud558\ub294 \uae30\ub2a5\uacfc lighthouse\ub97c \uae30\ubc18\uc73c\ub85c \uc6f9\uc0ac\uc774\ud2b8\ub97c \ucd5c\uc801\ud654 \ud574\ubcf4\ub294 \uc2dc\uac04\uc744 \uac00\uc84c\uc2b5\ub2c8\ub2e4.\\n\\n\x3c!--truncate--\x3e\\n\\n## \ucd5c\uc801\ud654 \ud558\ub824\ub294 \ud504\ub85c\uc81d\ud2b8\\n\\n[nextjs-blog](nextjs-blog-challenge.vercel.app)\\n\\n## \ucd5c\uc801\ud654 \uc804, lighthouse \uacb0\uacfc\\n\\n![\ub9ac\ud329\ud130\ub9c1\uc804](./images/before-refactor.png)\\n\\n- SSG\ub85c \ub9cc\ub4e4\uc5b4\uc838\uc788\ub294\ub370\ub2e4 \uae30\ub2a5\uc774 \ub9ce\uc774 \uc5c6\uc5b4\uc11c \ub300\ubd80\ubd84\uc758 \uc131\ub2a5\uc774 \uc774\ubbf8 \ub192\uc740 \uc0c1\ud0dc\uc600\ub2e4.\\n- \uadf8\ub7ec\ub098 SSG\ub85c \ub9cc\ub4e4\uc5b4\uc84c\uc74c\uc5d0\ub3c4 SEO\uc758 \uc810\uc218\uac00 \ub0ae\uae30 \ub54c\ubb38\uc5d0 SEO\ub97c \ub354 \ucc59\uaca8\ubcf4\uae30\ub85c \ud588\ub2e4.\\n\\n### 1. SEO\\n\\n- `Head`\ub97c \uc0ac\uc6a9\ud558\ub294 \ubc29\ubc95\uc740 \ub450 \uac00\uc9c0\uc774\ub2e4. `next/head` \uc5d0\uc11c \uac00\uc838\uc624\ub294 \ubc29\ubc95\uacfc `next/document`\uc5d0\uc11c \uac00\uc838\uc624\ub294 \ubc29\ubc95\uc774 \uc788\ub2e4.\\n- \ubaa8\ub4e0 \ud398\uc774\uc9c0\uc5d0\uc11c meta \ud0dc\uadf8\ub97c \'\uacf5\ud2cd\'\uc73c\ub85c \uc4f0\uace0\uc790 \ud55c\ub2e4\uba74 `pages/_document.tsx`\uc5d0\uc11c \uc791\uc5c5\ud55c\ub2e4.\\n- \ud398\uc774\uc9c0\ub9c8\ub2e4 \ub2e4\ub978 meta \ud0dc\uadf8\ub97c \ubd80\uc5ec\ud558\uace0\uc790 \ud55c\ub2e4\uba74 (ex: title) `next/head` \uc5d0\uc11c \uac00\uc838\uc640\uc11c \uc4f4\ub2e4.\\n- \ud574\ub2f9 \ud504\ub85c\uc81d\ud2b8\ub294 \uacf5\ud1b5\uc73c\ub85c \uc4f0\uace0\uc790 \ud588\ub2e4.\\n\\n```tsx\\n// src/components/Meta.tsx\\n\\nconst Meta = () => {\\n  return (\\n    <>\\n      <meta charSet=\\"utf-8\\" />\\n      <meta\\n        name=\\"viewport\\"\\n        content=\\"width=device-width, initial-scale=1, shrink-to-fit=no\\"\\n      />\\n      <meta name=\\"keywords\\" content=\\"nextjs, \uc9c0\ub2c8, \ube14\ub85c\uadf8\\" />\\n      // ...\\n    </>\\n  );\\n};\\n```\\n\\n- Meta \ud0dc\uadf8\uac00 \uae38\uc5b4\uc9c8 \uac83 \uac19\uc544\uc11c, \ub610\ub294 \ucd94\ud6c4 \ub3d9\uc801 meta \ud0dc\uadf8\ub97c \ubd80\uc5ec\ud558\uace0\uc790 \ud560 \ub54c\ub97c \ub300\ube44\ud574 meta \ud0dc\uadf8\ub97c \ucef4\ud3ec\ub10c\ud2b8\ub85c \ube7c\ub450\uc5c8\ub2e4.\\n\\n```tsx\\n// pages/_document.tsx\\n\\nimport { Html, Head, Main, NextScript } from \'next/document\';\\nimport Meta from \'@src/components/Meta\';\\n\\nexport default function Document() {\\n  return (\\n    <Html lang=\\"ko\\">\\n      <Head>\\n        <Meta />\\n      </Head>\\n      <body>\\n        <Main />\\n        <NextScript />\\n      </body>\\n    </Html>\\n  );\\n}\\n```\\n\\n### 2. [Compression](https://nextjs.org/docs/api-reference/next.config.js/compression)\\n\\n- Next.js\ub294 \ub80c\ub354\ub9c1\ub41c \ucf58\ud150\uce20\uc640 \uc815\uc801 \ud30c\uc77c\uc744 \uc555\ucd95\ud558\uae30 \uc704\ud574 [gzip \uc555\ucd95](https://www.rfc-editor.org/rfc/rfc6713#section-3)\uc744 \uc81c\uacf5\ud55c\ub2e4.\\n\\n  > gzip\uc740 \ud30c\uc77c \uc555\ucd95\uc5d0 \uc4f0\uc774\ub294 \uc751\uc6a9 \uc18c\ud504\ud2b8\uc6e8\uc5b4\uc774\ub2e4. gzip\uc740 GNU zip\uc758 \uc900\ub9d0\uc774\uba70, \ucd08\uae30 \uc720\ub2c9\uc2a4 \uc2dc\uc2a4\ud15c\uc5d0 \uc4f0\uc774\ub358 \uc555\ucd95 \ud504\ub85c\uadf8\ub7a8\uc744 \ub300\uccb4\ud558\uae30 \uc704\ud55c \uc790\uc720 \uc18c\ud504\ud2b8\uc6e8\uc5b4\uc774\ub2e4.\\n\\n  ```js\\n  // next.config.js\\n  module.exports = {\\n    compress: true,\\n  };\\n  ```\\n\\n### 3. [SWC](https://nextjs.org/docs/advanced-features/compiler)\\n\\n- \uc790\ubc14\uc2a4\ud06c\ub9bd\ud2b8 \ucef4\ud30c\uc77c\ub7ec. \uc774 \ucef4\ud30c\uc77c\ub7ec\ub97c \uc0ac\uc6a9\ud55c \ucef4\ud30c\uc77c\uc740 Babel\ubcf4\ub2e4 17\ubc30 \ube60\ub974\uba70 Next.js \ubc84\uc804 12\ubd80\ud130 \uae30\ubcf8\uc801\uc73c\ub85c \ud65c\uc131\ud654\ub41c\ub2e4.\\n\\n  ```js\\n  // next.config.js\\n  module.exports = {\\n    swcMinify: true,\\n  };\\n  ```\\n\\n### 4. [\uc790\ubc14\uc2a4\ud06c\ub9bd\ud2b8 \ud06c\uae30 \uc904\uc774\uae30](https://nextjs.org/docs/going-to-production#reducing-javascript-size)\\n\\n- \uad8c\uc7a5\ud558\ub294 \ub3c4\uad6c\ub294 \uc5ec\ub7ec \uac00\uc9c0\uac00 \uc788\uc9c0\ub9cc \uadf8 \uc911 [Webpack \ubc88\ub4e4 \ubd84\uc11d\uae30](https://github.com/vercel/next.js/tree/canary/packages/next-bundle-analyzer)\ub97c \uc801\uc6a9\ud574\ubcf4\uc558\ub2e4.\\n\\n  ```js\\n  // next.config.js\\n  const withBundleAnalyzer = require(\'@next/bundle-analyzer\')({\\n    enabled: process.env.ANALYZE === \'true\',\\n  });\\n\\n  module.exports = withBundleAnalyzer({\\n    compress: true,\\n    reactStrictMode: true,\\n    swcMinify: true,\\n    compiler: {\\n      removeConsole: {\\n        exclude: [\'error\'],\\n      },\\n    },\\n    webpack(config, { webpack }) {\\n      const prod = process.env.NODE_ENV === \'production\';\\n      return {\\n        ...config,\\n        mode: prod ? \'production\' : \'development\',\\n        devtool: prod ? \'hidden-source-map\' : \'eval-source-map\',\\n        plugins: [\\n          ...config.plugins,\\n          new webpack.ContextReplacementPlugin(\\n            /moment[/\\\\\\\\]locale$/,\\n            /^\\\\.\\\\/ko$/\\n          ),\\n        ],\\n      };\\n    },\\n  });\\n  ```\\n\\n![\ubc88\ub4e4 clinet](./images/bundle.png)\\n![\ubc88\ub4e4 clinet2](./images/bundle2.png)\\n\\n- \uae30\ubcf8\uc801\uc778 \ubc88\ub4e4\uc778 \uac83 \uac19\uc544\uc11c \ud2b8\ub9ac \uc250\uc774\ud0b9\ud558\uc9c4 \uc54a\uc558\ub2e4.\\n\\n### 5. \uce90\uc2f1 \uc774\uc6a9\ud558\uae30\\n\\n#### swr\\n\\n[swr](https://swr.vercel.app/ko)\uc744 \uc774\uc6a9\ud558\uc5ec \uce90\uc2f1\uc744 \uc774\uc6a9\ud558\uc600\ub2e4.\\n\\n> swr: \uce90\uc2dc(\uc2a4\ud0dc\uc77c)\ub85c\ubd80\ud130 \ub370\uc774\ud130\ub97c \ubc18\ud658\ud55c \ud6c4, fetch \uc694\uccad(\uc7ac\uac80\uc99d)\uc744 \ud558\uace0, \ucd5c\uc885\uc801\uc73c\ub85c \ucd5c\uc2e0\ud654\ub41c \ub370\uc774\ud130\ub97c \uac00\uc838\uc624\ub294 \uc804\ub7b5\\n\\n1. fetcher \ud568\uc218\ub97c \uc0dd\uc131\\n2. \ubd80\ubaa8 \ucef4\ud3ec\ub10c\ud2b8\uc5d0 `<SWRConfig value={{ fallback }}>`\uc744 \uac10\uc2fc \ub4a4\\n3. \uc0ac\uc6a9\ud558\uace0\uc790 \ud558\ub294 \ucef4\ud3ec\ub10c\ud2b8\ub098 \ud398\uc774\uc9c0\uc5d0 (\ubd80\ubaa8 \ucef4\ud3ec\ub10c\ud2b8\uc758 \uc790\uc2dd \ucef4\ud3ec\ub10c\ud2b8) useSWR \ud6c5\uc744 \uc0ac\uc6a9\\n   - \ubb38\ubc95 `const { data, error } = useSWR(key, fetcher, \uc635\uc158)`\\n   - key: \uc694\uccad\uc744 \uc704\ud55c **\uace0\uc720\ud55c \ud0a4** \ubb38\uc790\uc5f4(\ub610\ub294 \ud568\uc218 / \ubc30\uc5f4 / null)\\n   - fetcher: (\uc635\uc158) \ub370\uc774\ud130\ub97c \uac00\uc838\uc624\uae30 \uc704\ud55c \ud568\uc218\ub97c \ubc18\ud658\ud558\ub294 Promise\\n   - \uc5ec\uae30\uc758 fetcher\ub294 SWR\uc758 key\ub97c \ubc1b\uace0 \ub370\uc774\ud130\ub97c \ubc18\ud658\ud558\ub294 \ube44\ub3d9\uae30 \ud568\uc218\uc774\ub2e4\\n   - `key`\ub294 \uace0\uc720\ud558\ubbc0\ub85c \uc5b4\ub514\uc5d0\uc11c\ub4e0 (\ud398\uc774\uc9c0\ub4e0, \ucef4\ud3ec\ub10c\ud2b8\ub4e0) \uc6d0\ud55c\ub2e4\uba74 \ub370\uc774\ud130\ub97c \uaebc\ub0b4\uc4f8 \uc218 \uc788\ub2e4.\\n   - \uc0ac\uc774\ud2b8\uc758 \ud2b9\uc131\uc5d0 \ub530\ub77c \uc635\uc158\uc744 \uc790\uc720\ub86d\uac8c \ubd80\uc5ec\ud55c\ub2e4. `ex: revalidateOnFocus = false`\\n\\n#### swr\uc73c\ub85c \uce90\uc2dc \ud655\uc778\ud558\uae30\\n\\n\uce90\uc2dc\uac00 \uc798 \ub2f4\uacbc\ub294\uc9c0 \uad81\uae08\ud558\ub2e4\uba74 \uce90\uc2dc \uc548\uc744 \ud655\uc778\ud574\ubcfc \uc218 \uc788\ub2e4.\\n\uba54\uc778 \ud654\uba74\uc758 `/api/posts`\ub77c\ub294 \ud0a4\ub97c \uac00\uc9c4 `Allposts`\uac00 \uce90\uc2dc\uc5d0 \uc798 \ub2f4\uacbc\ub294\uc9c0 \ud655\uc778\ud574\ubcf4\uc558\ub2e4. \ud574\ub2f9 \ud398\uc774\uc9c0\uc5d0\uc11c \ud655\uc778\ud560 \uc218 \uc788\uc5c8\uc9c0\ub9cc, \uc5b4\ub290 \uacf3\uc5d0\uc11c\ub3c4 \uce90\uc2dc\uac00 \uc0ac\ub77c\uc9c0\uc9c0 \uc54a\uace0 \uc798 \ub2f4\uae34\ub2e4\ub294 \uac83\uc744 \ud655\uc778\ud574\ubcf4\uae30 \uc704\ud574 \uc77c\ubd80\ub7ec `slug` \ub2e8\uc77c \ud398\uc774\uc9c0\uc5d0\uc11c `Allposts`\uce90\uc2dc\ub97c \ud655\uc778\ud574\ubcf4\uae30\ub85c \ud588\ub2e4.\\n\\n1. \uba3c\uc800 `import { useSWRConfig } from \'swr\';` \ub97c import \ud55c\ub2e4.\\n2. `cache.get(\'\ud655\uc778\ud558\uace0 \uc2f6\uc740 key\')`\ub97c \ud558\uc5ec \uce90\uc2dc\ub97c get \ud574\uc62c \uc218 \uc788\ub2e4.\\n\\n   ```tsx\\n     const PostContent = () => {\\n     const { cache } = useSWRConfig();\\n     const { query } = useRouter();\\n     const { data: post, error } = useSWR(\\n       `/api/posts/${query.slug || null}`,\\n       fetcher\\n     );\\n\\n     const check = cache.get(\'/api/posts\'); <- \uc5ec\uae30\\n     console.log(check);\\n     //...\\n   ```\\n\\n3. \uce90\uc2dc\uac00 \ub2f4\uae30\uae30 \uc804\uc5d0\ub294 undefined\ub85c \uc544\ubb34\uac83\ub3c4 \ub2f4\uae30\uc9c0 \uc54a\uc558\ub2e4.\\n   ![\uce90\uc2dc\uac00 \ub2f4\uae30\uae30 \uc804](./images/cashetest1.png)\\n4. \uce90\uc2dc\ub97c \ub2f4\uc744 \uc218 \uc788\ub3c4\ub85d `/api/posts` key\ub97c \uac16\uace0 \uc788\ub294 \uba54\uc778 \ud398\uc774\uc9c0\ub85c \uc774\ub3d9\ud588\ub2e4\uac00 \ub418\ub3cc\uc544\uc624\uba74 \uce90\uc2dc\uac00 \ub2f4\uaca8\uc788\ub294 \uac83\uc744 \ud655\uc778\ud560 \uc218 \uc788\ub2e4.\\n   ![\uce90\uc2dc\uac00 \ub2f4\uae34 \ud6c4](./images/cashetest2.png)\\n\\n## \ucd5c\uc801\ud654 \uc774\ud6c4, lighthouse \uacb0\uacfc\\n\\n![\ub9ac\ud329\ud130\ub9c1\ud6c4](./images/after-refactor.png)\\n\\n- \uc62c 100\uc744 \ub9de\uc73c\uba74 lighthouse\uac00 \uaf43\uac00\ub8e8\uae4c\uc9c0 \ub0a0\ub824\uc900\ub2e4.\\n\\n## Reference\\n\\n### mdn\\n\\n- [HTTP\uc5d0\uc11c\uc758 \uc555\ucd95](https://developer.mozilla.org/ko/docs/Web/HTTP/Compression)\\n\\n### NextJs\\n\\n- [NextJs \uc555\ucd95](https://nextjs.org/docs/api-reference/next.config.js/compression)\\n- [Dynamic Import](https://nextjs.org/docs/advanced-features/dynamic-import)\\n- [SWC](https://nextjs.org/docs/advanced-features/compiler)\\n- [\uc790\ubc14\uc2a4\ud06c\ub9bd\ud2b8 \ud06c\uae30 \uc904\uc774\uae30](https://nextjs.org/docs/going-to-production#reducing-javascript-size)"}]}')}}]);